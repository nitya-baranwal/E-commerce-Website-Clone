
//products start

let prod = [
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401037-1_823x.jpg?v=1659448039',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401037-3_360x.jpg?v=1659448041',
    name: 'Shocker Adjustable Ring',
    price: '$10.00',
    stock_status: true
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401036-1_823x.jpg?v=1659447986',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401036-3_360x.jpg?v=1659447987',
    name: 'Maiden Adjustable Ring',
    price: '$10.00',
    stock_status: false
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401035-2_823x.jpg?v=1659447930',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401035-3_360x.jpg?v=1659447930',
    name: 'Feather Adjustable Ring',
    price: '$12.00',
    stock_status: true
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401034-1_823x.jpg?v=1659447861',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401034-3_360x.jpg?v=1659447867',
    name: 'Wired Adjustable Ring',
    price: '$12.00',
    stock_status: false
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401037-1_823x.jpg?v=1659448039',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401037-3_360x.jpg?v=1659448041',
    name: 'Shocker Adjustable Ring',
    price: '$14.00',
    stock_status: true
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401036-1_823x.jpg?v=1659447986',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401036-3_360x.jpg?v=1659447987',
    name: 'Maiden Adjustable Ring',
    price: '$14.00',
    stock_status: false
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401035-2_823x.jpg?v=1659447930',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401035-3_360x.jpg?v=1659447930',
    name: 'Feather Adjustable Ring',
    price: '$16.00',
    stock_status: true
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401034-1_823x.jpg?v=1659447861',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401034-3_360x.jpg?v=1659447867',
    name: 'Wired Adjustable Ring',
    price: '$16.00',
    stock_status: false
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401037-1_823x.jpg?v=1659448039',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401037-3_360x.jpg?v=1659448041',
    name: 'Shocker Adjustable Ring',
    price: '$10.00',
    stock_status: true
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401036-1_823x.jpg?v=1659447986',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401036-3_360x.jpg?v=1659447987',
    name: 'Maiden Adjustable Ring',
    price: '$10.00',
    stock_status: false
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401035-2_823x.jpg?v=1659447930',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401035-3_360x.jpg?v=1659447930',
    name: 'Feather Adjustable Ring',
    price: '$12.00',
    stock_status: true
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401034-1_823x.jpg?v=1659447861',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401034-3_360x.jpg?v=1659447867',
    name: 'Wired Adjustable Ring',
    price: '$12.00',
    stock_status: false
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401037-1_823x.jpg?v=1659448039',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401037-3_360x.jpg?v=1659448041',
    name: 'Shocker Adjustable Ring',
    price: '$10.00',
    stock_status: true
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401036-1_823x.jpg?v=1659447986',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401036-3_360x.jpg?v=1659447987',
    name: 'Maiden Adjustable Ring',
    price: '$10.00',
    stock_status: false
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401035-2_823x.jpg?v=1659447930',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401035-3_360x.jpg?v=1659447930',
    name: 'Feather Adjustable Ring',
    price: '$12.00',
    stock_status: true
  },
  {
    image1: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401034-1_823x.jpg?v=1659447861',
    image2: 'https://cdn.shopify.com/s/files/1/0627/7388/7215/products/L401034-3_360x.jpg?v=1659447867',
    name: 'Wired Adjustable Ring',
    price: '$12.00',
    stock_status: false
  }
];

for(let k of prod){
  k.flag = 0;
}
console.log(prod);

localStorage.setItem('products',JSON.stringify(prod));

let arrLS = JSON.parse(localStorage.getItem('products'))||[];

let container = document.getElementById('jewel-new-main-div');

let append = (prod) => {

  container.innerHTML = null;

  prod.forEach( (el,idx) => {

    let card = document.createElement('div');
    card.setAttribute('class','jewel-card-div');

    let img1 = document.createElement('img');
    img1.setAttribute('class','jewel-card-image-1');
    img1.src = el.image1;

    let div1 = document.createElement('div');
    div1.setAttribute('class','jewel-image-div');

    let img2 = document.createElement('img');
    img2.setAttribute('class','jewel-card-image-2');
    img2.src = el.image2;

    let div2 = document.createElement('div');
    div2.setAttribute('class','div-2');
    div2.setAttribute('class','overlay');
    
    let name1 = document.createElement('p');
    name1.innerText = el.name;
    name1.setAttribute('class','jewel-card-div-name');
    
    let price1 = document.createElement('p');
    price1.innerText = el.price;
    price1.setAttribute('class','jewel-card-div-price');

    let icon_div_outer = document.createElement('div');
    icon_div_outer.setAttribute('id','icon_div_outer');

    let icon_div_inner = document.createElement('div');
    icon_div_inner.setAttribute('class','icon_div_inner');

    icon_div_outer.innerHTML = `<button id='icon-heart-hollow' style='font-size:24px;color: #d8a353'> <i class='far fa-heart'></i></button>`;

    icon_div_outer.onclick = () => {
      console.log('onclick');
      if(el.flag == 0){
        icon_div_outer.innerHTML = `<button id='icon-heart-fill' style='font-size:24px;color:#d8a353'><i class='fas fa-heart'></i></button>`;
        el.flag = 1;
      } else if (el.flag == 1){
        icon_div_outer.innerHTML = `<button id='icon-heart-hollow' style='font-size:24px;color: #d8a353'> <i class='far fa-heart'></i></button>`;
        el.flag = 0;
      }
    }



    img2.addEventListener('click',function(){
      let obj = {
        image1:el.image1,
        image2:el.image2,
        name:el.name,
        price:el.price,
        stock_status:el.stock_status
      }
      localStorage.setItem('jewel-product',JSON.stringify(obj));
      window.location.href = 'displayProduct.html'
    });


    

    icon_div_outer.append(icon_div_inner);
    div2.append(img2);
    card.append(div1, name1, price1, icon_div_outer);
    div1.append(img1,div2);
    container.append(card);
    arrLS.push(el);
  });
  localStorage.setItem('products',JSON.stringify(arrLS));

}
append(arrLS);

let data;
let priceFunc = () => {

  let min = document.getElementById('min-range').value;
  let max = document.getElementById('max-range').value;

  // let priceArrLS = JSON.parse(localStorage.getItem('priceArr'));

  if((min == "") && (max == "")){
    append(prod);
    // localStorage.setItem('priceArr', JSON.stringify([]));
  } else if((min == 10) && (max == "")){
    let a_data = prod;
    max = 20;
    a_data = a_data.filter((el) => {
      let str = el.price;
      str = str.slice(1,5);
      let x = +(str);
      return ((+x)>=(+min) && (+x)<=(+max));
    });
    // localStorage.setItem('priceArr', JSON.stringify(a_data));
    append(a_data);
  } else if((min == "") && (max == 20)){
    let a_data = prod;
    min = 10;
    a_data = a_data.filter((el) => {
      let str = el.price;
      str = str.slice(1,5);
      let x = +(str);
      return ((+x)>=(+min) && (+x)<=(+max));
    });
    localStorage.setItem('priceArr', JSON.stringify(a_data));
    append(a_data);
  } else if((min != "" ) && (max != "")){
    let a_data = prod;
    a_data = a_data.filter((el) => {
      let str = el.price;
      str = str.slice(1,5);
      let x = +(str);
      return ((+x)>=(+min) && (+x)<=(+max));
    });
    // localStorage.setItem('priceArr', JSON.stringify(a_data));
    append(a_data);
  }

}

var expanded = false;

function showCheckboxes() {
  var checkboxes = document.getElementById("checkboxes");
  if (!expanded) {
    checkboxes.style.display = "block";
    expanded = true;
  } else {
    checkboxes.style.display = "none";
    expanded = false;
  }
}

function inStock() {
  let filtered = [...prod];
  // console.log(filtered);
  let stock_in = document.getElementById('in-stock');

  if(stock_in.checked == true){
  filtered = filtered.filter((el) => {
    // console.log(el.stock_status);
    return (el.stock_status == true);
  });
  // console.log(filtered);
  append(filtered);
} else {
  append(prod);
}
}

function outStock() {
  let filtered = [...prod];
  // console.log(filtered);
  let stock_out = document.getElementById('out-of-stock');

  if(stock_out.checked == true){
  filtered = filtered.filter((el) => {
    // console.log(el.stock_status);
    return (el.stock_status == false);
  });
  // console.log(filtered);
  append(filtered);
} else {
  append(prod);
}
}

let sortbtn = document.getElementById('sortby');

sortbtn.addEventListener('change', () => {
  let sort_value = sortbtn.value;
  // console.log(prod);
  let sortData = [...prod];
  if(sort_value == ""){
    append(sortData);
  }else if(sort_value == 'a-z'){
    sortData.sort( ( x, y ) => {
      let a = x.name.toUpperCase();
      let b = y.name.toUpperCase();
      if(a<b){
        return -1;
      }
    });
    // console.log(sortData);
    append(sortData);
  } else if(sort_value == 'z-a'){
    sortData.sort( ( x, y ) => {
      let a = x.name.toUpperCase();
      let b = y.name.toUpperCase();
      if(b<a){
        return -1;
      }
    });
    // console.log(sortData);
    append(sortData);
  } else if(sort_value == 'lowToHigh'){
    sortData.sort((a,b) => {
      let str1 = a.price;
      str1 = str1.slice(1,5);
      let x = +(str1);
      let str2 = b.price;
      str2 = str2.slice(1,5);
      let y = +(str2);
      return x-y;
    });
    append(sortData);
  } else if(sort_value == 'highToLow'){
    sortData.sort((a,b) => {
      let str1 = a.price;
      str1 = str1.slice(1,5);
      let x = +(str1);
      let str2 = b.price;
      str2 = str2.slice(1,5);
      let y = +(str2);
      return y-x;
    });
    append(sortData);
  }
});



function myFunction() {
  document.getElementById("reset-form").reset();
  document.getElementById("reset-form1").reset();
}



















